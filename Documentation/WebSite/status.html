<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PhEDEx Depoyment Status</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link href="style.css" rel="stylesheet" type="text/css">
</head>

<body>
<h1>PhEDEx status as of 2004-11-29</h1>

<p>V2 has been operational for a little over a month now.  ~30 TB
of data was injected on Oct 19th, of which ~4 TB remains to be moved.
After fair amount of work we are beginning to approach an operational
state and files are moved fairly robustly.  We have not yet reached
the state of running the system unattended for extended periods of
time.</p>

<p>We are now engaging in updating the schema to V2.1.  The principal
change in this update is to separate PhEDEx from catalogues.  This
means PhEDEx no longer accesses catalogues directly, but uses site-
specific glue.  In particular, download agents will not access remote
catalogues, the export agent invokes a site-specific glue scripts to
generate a transfer name (TURL) for a file on demand.  Similarly, on
import download agent invokes local script to add the file to the
catalogue.</p>

<p>News:</p>
<ul>
 <li> <a href="https://uimon.cern.ch/twiki/bin/view/CMS/PhEDEx">A wiki</a>
      has been created for the project.</li>
</ul>

<p>PhEDEx Projects:</p>
<ul>
 <li> V2 migration: completed.</li>
 <li> Transfer request tools: sufficient for now.  Web interface for
      creating transfer requests being tested in PHYSH.  Adding support
      to inject data using RefDB data availability information soon.
      Expecting to move transfer requests into the database soon,
      allowing much more convenient injection functionality.
 <li> Transfer requests: new lot received from PRS/Lucia Silvestris.
      Lucia will exercise the new wizard to create a new set of
      transfer requests.</li>
 <li> Production/PhEDEx link: A scheme has been agreed and will be
      excercised this week.</li>
 <li> Testbed: In place.  Will be used for V2.1 migration.</li>
 <li> Toolkit development: V2.1 development ongoing.</li>
</ul>

<p>Deployment status:</p>
<ul>
 <li> CERN T0: Certificates obtained.  Download to be tested.
      MSS migration works.  Export works.  Data injection works.
      Checking consistency before V2.1 migration.  Have a local
      MySQL catalogue, tested migration from RLS.  About to
      test merge from PubDB catalogues.  No known issues.</li>

 <li> ASCC T1: N/A.</li>
 <li> CNAF-INFN T1: N/A.</li>
 <li> FNAL T1: N/A.</li>
 <li> FZK T1: N/A.</li>
 <li> IN2P3 T1: Download works.  MSS migration mostly works?  No
      export yet.  Still using RLS as catalogue and replica manager
      as transfer tools.  All assigned data moved.</li>
 <li> PIC T1: Download works.  MSS migration works.  Export from
      disk works, export from MSS not yet(?).  Still using RLS as
      catalogue and replica manager as transfer tool.  All assigned
      data moved.</li>
 <li> RAL T1: N/A.</li>
</ul>

<p>Deployment projects:</p>
<ul>
 <li> General: Test new download handshake with the V2.1 schema.
      Test migration in dev database.  Migrate prod database.
      Ensure RefDB-based multi-site injection works.  Performance
      studies to find out why transfer rates are so slow..</li>

 <li> CERN T0: Deploy local MySQL catalogue, shared with PubDB.
      Check consistency between TMDB, catalogue and Castor.  Deploy
      download agents with certificates.  Test new castor stager.</li>

 <li> ASCC T1: N/A.</li>
 <li> CNAF-INFN T1: N/A.  MSS Agent?  Export agent?  T1/T2 transfers?  V2.1 adaptation?</li>
 <li> FNAL T1: N/A.  MSS Agent?  Export agent?  V2.1 adaptation?</li>
 <li> FZK T1: N/A.  Export agent?  V2.1 adaptation?</li>
 <li> IN2P3 T1: N/A.  Export agent?  V2.1 adapation?</li>
 <li> PIC T1: N/A.  MSS Export agent? V2.1 adaptation?</li>
 <li> RAL T1: N/A.  MSS Agent?  MSS Export agent?  Export agent?  V2.1 adaptation?</li>

 <li> NCU T2: N/A.</li>
 <li> INFN Legnaro T2: N/A.</li>
 <li> INFN Bari T2: N/A.</li>
 <li> LLR T2: N/A.</li>
 <li> CIEMAT T2: N/A.</li>

 <li> Aachen T3: N/A.</li>
 <li> Hamburg T3: N/A.</li>
</ul>


<h1>PhEDEx status as of 2004-10-08</h1>

<p>V1 is dead.  The data is being migrated to V2 (task tracking:
<a href="http://savannah.cern.ch/task/?func=detailitem&item_id=1190">#1190</a>).
V2 schema has been loaded into the production database (pdb01) and
the V1 data has been copied into V2 tables.  The new data has been
verified to be consistent.  The following tasks track the anomalies
discovered:
<a href="http://savannah.cern.ch/task/?func=detailitem&item_id=1226">#1226</a>,
<a href="http://savannah.cern.ch/task/?func=detailitem&item_id=1228">#1228</a>,
<a href="http://savannah.cern.ch/task/?func=detailitem&item_id=1229">#1229</a>.
Tasks remaining in migration to V2:
<a href="http://savannah.cern.ch/task/?func=detailitem&item_id=1230">#1230</a>,
<a href="http://savannah.cern.ch/task/?func=detailitem&item_id=1231">#1231</a>,
<a href="http://savannah.cern.ch/task/?func=detailitem&item_id=1232">#1232</a>,
<a href="http://savannah.cern.ch/task/?func=detailitem&item_id=1233">#1233</a>,
<a href="http://savannah.cern.ch/task/?func=detailitem&item_id=1234">#1234</a>.</p>

<p>Nobody is currently transferring.  Once migration is complete early next
week we expect to inject all outstanding transfer requests with data available
at CERN (task:
<a href="http://savannah.cern.ch/task/?func=detailitem&item_id=1235">#1235</a>).
We have also requested a new set of transfer requests from PRS (task:
<a href="http://savannah.cern.ch/task/?func=detailitem&item_id=1236">#1236</a>).</p>

<p>Current deployment status:</p>
<ul>
 <li> CERN T0: Inbound download to be configured and tested.
      MSS migration works.  Export works.  Data injection works.
      V2 consistency check ok.  Ready to start with V2.</li>

 <li> ASCC T1: Inbound download works.  MSS migration works.
      Export using toolkit agents?  Eagerly waiting for instructions
      for data injection.  V2 data is consistent since there wasn't
      any for ASCC.  Ready to start with V2.</li>

      <ul>
       <li> NCU T2: Idem.</li>
      </ul></li>

 <li> CNAF-INFN T1: Inbound download to IEB node (INFN_Transfer) works.
      MSS migration in the works.  Export from MSS and IEB (transfer)
      agents in the works.  No data injection yet.  Checking V2 data
      consistency.  Ready to start with V2?
      
      <ul>
       <li> INFN T2 (Legnaro?): no report yet.</li>
      </ul></li>

 <li> FNAL: Inbound download?  MSS migration?  Export?  No data
      injection yet.  Checking V2 data consistency.  Ready to
      start with V2?</li>

 <li> FZK T1: Inbound download works.  SRM interface now available,
      but to be considered in test, so transfers will continue with
      globus-url-copy for now.  Export will be available once SRM
      interface is stable; agent already exists.  Will require
      contact string change in TMDB when SRM switch occurs.
      V2 data is consistent since there wasn't any for FZK.
      Collecting data requests from collaborators.  Ready to
      start with V2.
      
      <ul>
	<li> Aachen T3: Considering transfer with PhEDEx.
	<li> Hamburg T3: Considering transfer with PhEDEx.
      </ul></li>

 <li> IN2P3 T1: Inbound download works; no explicit MSS migration.
      No export yet.  No data injection yet.  V2 data is consistent
      since there wasn't any for IN2P3.  Ready to start with V2?
      
      <ul>
       <li> LLR T2: Outstanding issues with libraries compiled
            with a wrong version of GCC.  Ready to start with V2?</li>
      </ul></li>

 <li> PIC T1: Inbound download works.  MSS migration works.  Export
      works using toolkit agents?  No data injection yet.  Ready to
      start with V2?</li>

      <ul>
       <li> CIEMAT T2: Inbound download works.  No export or injection
	    yet (is it even planned?).  Ready to start with V2?</li>
      </ul></li>

 <li> RAL: no news is good news?</li>
</ul>

<p>Work pending (FIXME: savannah tasks!):</p>
<ul>
 <li> Meta: Deploy testbed.  CVS migration.</li>
 <li> CERN: Enable agents.  Clean up lxgate04.  Test download.</li>
 <li> ASCC/NCU: Test export.  Test injection.</li>
 <li> FNAL: Finish V2 download agents, export and injection.</li>
 <li> FZK: Stable interface for SRM.  Test export and injection.</li>
 <li> CNAF-INFN, IN2P3/LLR, PIC/CIEMAT, RAL: waiting for report.</li>
</ul>

</body>
</html>
<h1>PhEDEx deployment status as of 2004-09-13</h1>

<h2>PhEDEx V1</h2>

<p>Currently transferring with V1: INFN, PIC, FNAL.  FNAL is also ready
to transfer to CERN with V1, but never got assignments.</p>

<p>Issues:</p>
<ul>
 <li> All: Stage-ins are a major headache.  Will be solved by the
      switch to V2 (FIXME: savannah tracking ticket).</li>

 <li> CNAF-INFN T1: Transferred all available hg03_H2mu_maX_tbY datasets;
      42 files are missing in a couple of pathological states (FIXME:
      savannah tracking ticket).</li>

 <li> CNAF-INFN T1: cancel subscription for hg03_DY2mu_shat80; don't want
      it and have not downloaded it (reason for many pending files)
      (FIXME: savannah tracking ticket).</li>

 <li> RAL: Promised disks (30 TB) still not available; current best
      estimate is October.</li>

 <li> PIC: No issues, but haven't transferred anything recently.</li>

 <li> FNAL: SRM at CERN and FNAL seem to work now after many problems.
      Except for the stage-in issues mentioned above, which cause the
      need to occasionally kill hanging SRM, there are no issues.</li>
</ul>

<p>Agents in use:</p>
<ul>
 <li> CNAF-INFN T1: INFN C agent.</li>
 <li> PIC: PIC C agent.</li>
 <li> FNAL: SRM bash T1 agents.</li>
</ul>

<h2>PhDEx V2</h2>

<p>V2 topologies: currently CastorGrid to all T1s back and forth,
each T1 should also have one-way link to a MSS node associated with
the transfer node.  PIC-CIEMAT two-way link from PIC Tier-1 transfer
node to CIEMAT Tier-2.  Similarly for ASCC-NCU and IN2P3-LLR.</p>

<p>Technology:</p>
<ul>
 <li> CNAF-INFN T1: LCG-2 SE.  Castor MSS.  INFN C agent.</li>
 <li> PIC T1: LCG-2 SE?  Castor MSS.  PIC C agent.</li>
 <li> CIEMAT T2: LCG-2 SE?  No MSS.  PIC C agent.</li>
 <li> FZK: Disk buffer, dCache MSS via SRM.  Toolkit.</li>
 <li> ASCC T1: LCG-2 SE.  Castor MSS.  Toolkit.</li>
 <li> NCU T2: LCG-2 SE.  No MSS. Toolkit.</li>
 <li> RAL: ADS.  Toolkit.</li>
 <li> IN2P3 T1:  No disk pool.  HPSS.  IN2P3 C agent.</li>
 <li> LLR T2: LCG-2 SE.  No MSS.  IN2P3 C agent.</li>
 <li> FNAL: dCache write pool.  Enstore MSS.  SRM bash agents.</li>
</ul>

<p>Current status:</p>
<ul>
 <li> CNAF-INFN T1: Transfer node ready; no schema changes yet.
      mu03b_DY2mu_Mll2000 test data (237 files) downloaded.  MSS
      node being worked on.  No export yet, but have lots of local
      scripts for verifying transfer state; expect to test export
      during/after workshop.</li>

 <li> PIC T1: Transfer node ready, sample data downloaded.  No
      schema update yet.  MSS node being worked on.  Will try
      using example agents.  No export yet; will try example
      agents during/after workshop.</li>

 <li> CIEMAT T2: Transfer node ready but topology not tested, test
      data not downloaded yet.  No schema update yet.  No MSS, so
      no agent needed.  No export yet.</li>

 <li> FZK T1: Not transferring yet, but expect to test in a couple of
      days.  Will use example agent for transfers to disk, but have
      only limited disk space available.  Working on SRM migration
      separately, but have issues with that.  No export yet, expect
      to try during/after workshop, depends on SRM (2-3 weeks?).</li>

 <li> ASCC T1/NCU T2: Testing example transfer agents with various
      degress of success (bugs in example agents).  No MSS node yet.
      No export yet, would like instructions.</li>

 <li> RAL: No transfers, disk still unavailable.  Will use toolkit
      where possible.  Estimate one working week (latency uncertain)
      to implement when hardware comes.  Export expected mid/late
      Q4/2004.</li>

 <li> FNAL: Completed script migration to V2, no new schema yet.
      Test data not yet transferred.  Expecting couple of days
      to adapt to new schema after the workshop.  No export yet,
      but have experience from V1 export; a week should be enough
      to adapt the tools after workshop.</li>

 <li> IN2P3: Outstanding issues with libraries compiled with a
      wrong version of GCC.</li>
</body>
</html>
