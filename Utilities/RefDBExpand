#!/usr/bin/env perl

BEGIN { use strict; use warnings;
  my $me = $0; $me =~ s|.*/||;
  my $home = $0; $home =~ s|/[^/]+$||; $home ||= "../Toolkit/Common";
  unshift(@INC, $home); }
use UtilsTR;

my $mode = undef;
while (scalar @ARGV)
{
    if ($ARGV[0] eq '-h' || $ARGV[0] eq '--help') {
	&usage();
    } elsif ($ARGV[0] =~ '^-([pfa])$') {
	$mode = $1; shift (@ARGV);
    } elsif ($ARGV[0] eq '--') {
	shift (@ARGV); last;
    } elsif ($ARGV[0] =~ '^-') {
	&usage ("$0: unrecognised option $ARGV[0]\n\n");
    } else {
	last;
    }
}

&usage() if (! defined $mode);
my @userpats = &readPatterns (@ARGV);
my @patterns = &expandPatterns ($mode, @userpats);
print map { "$_->[0].$_->[1]\n" } @patterns;
