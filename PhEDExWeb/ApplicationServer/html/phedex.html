<!DOCTYPE HTML PUBLIC “-//W3C//DTD HTML 4.01//EN” “http://www.w3.org/TR/html4/strict.dtd”>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <title>PhEDEx Web Interface</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-15" />

  <!-- YUI stylesheets-->
  <link rel="stylesheet" type="text/css" href="/yui/build/treeview/assets/skins/sam/treeview.css">
  <link rel="stylesheet" type="text/css" href="/yui/build/datatable/assets/skins/sam/datatable.css">
  <link rel="stylesheet" type="text/css" href="/yui/build/container/assets/container-core.css">
  <link rel="stylesheet" type="text/css" href="/yui/build/resize/assets/skins/sam/resize.css"> 
  <link rel="stylesheet" type="text/css" href="/yui/build/logger/assets/skins/sam/logger.css">
  <link rel="stylesheet" type="text/css" href="/yui/build/menu/assets/skins/sam/menu.css">
  <link rel="stylesheet" type="text/css" href="/yui/examples/treeview/assets/css/menu/tree.css">
  <link rel="stylesheet" type="text/css" href="/yui/build/button/assets/button-core.css">
  <link rel="stylesheet" type="text/css" href="/yui/build/assets/skins/sam/button.css">
  <link rel="stylesheet" type="text/css" href="/yui/build/fonts/fonts-min.css" />

  <!-- YUI libs -->
  <script type="text/javascript" src="/yui/build/yahoo-dom-event/yahoo-dom-event.js"></script>
  <script type="text/javascript" src="/yui/build/connection/connection-min.js"></script>
  <script type="text/javascript" src="/yui/build/json/json-min.js"></script>
  <script type="text/javascript" src="/yui/build/treeview/treeview-min.js"></script>
  <script type="text/javascript" src="/yui/build/logger/logger-min.js"></script>
  <script type="text/javascript" src="/yui/build/dragdrop/dragdrop-min.js"></script>
  <script type="text/javascript" src="/yui/build/element/element-min.js"></script>
  <script type="text/javascript" src="/yui/build/datasource/datasource-min.js"></script>
  <script type="text/javascript" src="/yui/build/datatable/datatable-min.js"></script>
  <script type="text/javascript" src="/yui/build/animation/animation-min.js"></script>
  <script type="text/javascript" src="/yui/build/container/container-min.js"></script>
  <script type="text/javascript" src="/yui/build/resize/resize-min.js"></script>
  <script type="text/javascript" src="/yui/build/menu/menu-min.js"></script>
  <script type="text/javascript" src="/yui/build/button/button-min.js"></script>

  <!-- PhEDEx stylesheets -->
  <link rel="stylesheet" type="text/css" href="/css/phedex.css">

  <!-- PhEDEx libs -->
  <script type="text/javascript" src="/js/phedex-base.js"></script>
  <script type="text/javascript" src="/js/phedex-core-logger.js"></script>
  <script type="text/javascript" src="/js/phedex-core-contextmenu.js"></script>
  <script type="text/javascript" src="/js/phedex-util.js"></script>
  <script type="text/javascript" src="/js/phedex-page.js"></script>
  <script type="text/javascript" src="/js/phedex-datasvc.js"></script>
  <script type="text/javascript" src="/js/phedex-core-control.js"></script>
  <script type="text/javascript" src="/js/phedex-core-widget.js"></script>
  <script type="text/javascript" src="/js/phedex-core-widget-datatable.js"></script>
  <script type="text/javascript" src="/js/phedex-core-widget-treeview.js"></script>
  <script type="text/javascript" src="/js/phedex-widget-agents.js"></script>
  <script type="text/javascript" src="/js/phedex-widget-nodes.js"></script>
  <script type="text/javascript" src="/js/phedex-widget-linkview.js"></script>
  <script type="text/javascript" src="/js/phedex-widget-requestview.js"></script>
</head>

<body class="yui-skin-sam">
 <div id='phedex-controls' class='phedex-controls'></div>
 <div id='phedex-logger'   class='phedex-invisible phedex-logger'></div>
 <div id='phedex-about'    class='phedex-invisible phedex-about'>
   <div class='phedex-heading-logo'>
     <a href="/html/phedex.html" title="PhEDEx Home Page">
       <img src="/images/phedex-logo-small.gif" alt="PhEDEx" height="80" />
     </a>
   </div>
   <div class='phedex-heading'/>
      <h1>PhEDEx Web Interface</h1>
      <h2>Next-generation Alpha Version</h1>
      <p>See the <a href="https://twiki.cern.ch/twiki/bin/view/CMS/PhedexProjWebsite">plan</a>,
      send feedback to <a href="mailto:cms-phedex-admins@cern.ch">cms-phedex-admins@cern.ch</a></p>
   </div>
 </div>
 <div id='phedex-instance' class='phedex-invisible phedex-instance'></div>
 <div id='phedex-main'></div>

<script type="text/javascript">
// This Page.Config object defines the page structure, using JSON
Page = { 'Config': [
  {call:'Nodes',         value:'',                  text:'Show Nodes'},
  {call:'LinkView',      value:'T1_US_FNAL_Buffer', text:'Show Links', opts:{time:12,direction:'from'} },
  {call:'Requests',      value:'30342',             text:'Show Requests' },
  {call:'Agents',        value:'T1_US_FNAL_Buffer', text:'Show Agents for node' }
 ] };

// instantiate the page and other things when the DOM is ready!
YAHOO.util.Event.onDOMReady(function() {
      PHEDEX.Logger.Create(
	    {width:'650px',height:'30em'}, // arguments to the YAHOO LogReader widget
	    {				   // options to the PHEDEX.Logger
	      collapse:false,
	      hideSource:['Core.ContextMenu','Core.Datasvc','Core.DataTable','Dom']
	    }
	);
      PHEDEX.Page.Create(Page.Config);
      var ctl1 = new PHEDEX.Core.Control({text:'About',
                    payload:{render:'phedex-controls', target:'phedex-about'},
		    events:[{event:'mouseover', handler:PHEDEX.Core.Control.controlHandler},
			    {event:'click',     handler:PHEDEX.Core.Control.controlHandler}
			   ] }
                );
      var ctl2 = new PHEDEX.Core.Control({text:PHEDEX.Datasvc.Instance().name,
                    payload:{render:'phedex-controls', target:'phedex-instance', fillFn:function(){PHEDEX.Page.Widget.Instance('phedex-instance');}},
		    events:[{event:'mouseover', handler:PHEDEX.Core.Control.controlHandler},
			    {event:'click',     handler:PHEDEX.Core.Control.controlHandler}
			   ] }
                );
      PHEDEX.Datasvc.InstanceChanged.subscribe(function() { ctl2.Hide(); ctl2.Label(PHEDEX.Datasvc.Instance().name); } );
      var ctl3 = new PHEDEX.Core.Control({text:'Show Logger',
                    payload:{render:'phedex-controls', target:'phedex-logger'} }
                );
    });
</script>

</body>
</html>
