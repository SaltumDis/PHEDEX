#### NODE
### ENVIRON
PHEDEX_BASE=<base>;
PHEDEX_SCRIPTS=<base>/PHEDEX;
PHEDEX_LOGS=<base>/<node>/logs;
PHEDEX_STATE=<base>/<node>/state;
PHEDEX_CUSTOM=<base>/<node>/node;

PHEDEX_CATALOGUE=<cat>;

PHEDEX_TMDB_USER=<user>;
PHEDEX_TMDB_PASS=<pass>;
PHEDEX_TMDB=<db>;
PHEDEX_NODE=<node>;

export PATH=/afs/cern.ch/sw/lcg/app/spi/scram:${PATH};
eval `cd /afs/cern.ch/sw/lcg/app/releases/POOL/POOL_1_6_4/src; scram -arch rh73_gcc32 runtime -sh`;
. /afs/cern.ch/projet/oracle/script/setoraenv.sh -s 8174

#### Management agents
### AGENT LABEL=mgmt-alloc PROGRAM=Toolkit/Workflow/FileAllocator
 -node ${PHEDEX_NODE}
 -db ${PHEDEX_TMDB}
 -dbuser ${PHEDEX_TMDB_USER}
 -dbpass ${PHEDEX_TMDB_PASS}
 -wait 600

### AGENT LABEL=mgmt-router PROGRAM=Toolkit/Infrastructure/FileRouter
 -node ${PHEDEX_NODE}
 -nodes '%'
 -db ${PHEDEX_TMDB}
 -dbuser ${PHEDEX_TMDB_USER}
 -dbpass ${PHEDEX_TMDB_PASS}
 -wait 15

#### Start monitoring
### AGENT LABEL=info-ts PROGRAM=Toolkit/Monitoring/InfoTransferStatus
 -db ${PHEDEX_TMDB}
 -dbuser ${PHEDEX_TMDB_USER}
 -dbpass ${PHEDEX_TMDB_PASS}
 -wait 5

### AGENT LABEL=info-tr PROGRAM=Toolkit/Monitoring/InfoTransferRate
 -db ${PHEDEX_TMDB}
 -dbuser ${PHEDEX_TMDB_USER}
 -dbpass ${PHEDEX_TMDB_PASS}
 -wait 600

### AGENT LABEL=info-fs PROGRAM=Toolkit/Monitoring/InfoFileSize
 -db ${PHEDEX_TMDB}
 -dbuser ${PHEDEX_TMDB_USER}
 -dbpass ${PHEDEX_TMDB_PASS}
 -wait 600

### AGENT LABEL=info-as PROGRAM=Toolkit/Monitoring/InfoDropStatus
 -site Testbed
 -dir ${PHEDEX_STATE}
 -db ${PHEDEX_TMDB}
 -dbuser ${PHEDEX_TMDB_USER}
 -dbpass ${PHEDEX_TMDB_PASS}
 -wait 60

### AGENT LABEL=info-sub PROGRAM=Toolkit/Monitoring/InfoSubscriptions
 -db ${PHEDEX_TMDB}
 -dbuser ${PHEDEX_TMDB_USER}
 -dbpass ${PHEDEX_TMDB_PASS}
 -wait 1800

### AGENT LABEL=info-rs PROGRAM=Toolkit/Monitoring/InfoReplicationStatus
 -db ${PHEDEX_TMDB}
 -dbuser ${PHEDEX_TMDB_USER}
 -dbpass ${PHEDEX_TMDB_PASS}
 -wait 1800
